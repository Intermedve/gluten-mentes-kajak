<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Glut√©nmentes √©telkeres≈ë</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f0f4f8; color: #333; }
    h1 { margin-bottom: 10px; color: #222; }
    .card { background: white; padding: 10px; margin: 5px; border-radius: 6px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); color: #222; }
    .result { margin-top: 10px; padding: 10px; background: #fff; border-radius: 6px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); display: flex; gap: 20px; flex-wrap: wrap; color: #222; }
    .ingredient-list { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px; }
    .ingredient-item { padding: 5px 10px; border-radius: 12px; color: #fff; font-weight: bold; text-shadow: 1px 1px 2px rgba(0,0,0,0.7); }
    .all-ingredients { margin-top: 20px; }
    .all-ingredient-item { padding: 10px; margin-bottom: 5px; border-radius: 8px; color: #fff; font-weight: bold; text-shadow: 1px 1px 2px rgba(0,0,0,0.7); }
    .slider-box { margin-top: 15px; padding: 10px; background:#fff; border-radius: 6px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
  </style>
</head>
<body>
  <h1>Glut√©nmentes √©tel ‚Üí √©teladatok</h1>
  <p>Ar√°nyos sk√°l√°z√°s cs√∫szk√°val (A verzi√≥).</p>

  <h2>√âtel ‚Üí sz√ºks√©ges alapanyagok</h2>
  <select id="reverseSelect" class="card"></select>
  <div id="scaleBox" class="slider-box" style="display:none">
    <label>Mennyis√©g szorz√≥: <span id="scaleValue">1.0√ó</span></label><br>
    <input type="range" id="scaleSlider" min="0.2" max="3" step="0.1" value="1">
  </div>

  <div id="reverseResult" class="result"></div>
  <div id="ingredientList" class="ingredient-list"></div>

  <div id="weeklyPlanner" style="margin-top:20px; margin-bottom:30px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
    <h2 style="margin-top:0; font-size:26px;">üìÖ Heti √©tkez√©s tervez≈ë</h2>
    <div class="card" style="padding:15px; display:flex; gap:20px; align-items:center;">
      <label><strong>Nap kiv√°laszt√°sa:</strong>
        <select id="daySelect" class="card" style="padding:5px 10px;">
          <option value="H√©tf≈ë">H√©tf≈ë</option>
          <option value="Kedd">Kedd</option>
          <option value="Szerda">Szerda</option>
          <option value="Cs√ºt√∂rt√∂k">Cs√ºt√∂rt√∂k</option>
          <option value="P√©ntek">P√©ntek</option>
          <option value="Szombat">Szombat</option>
          <option value="Vas√°rnap">Vas√°rnap</option>
        </select>
      </label>
      <button id="addToDayBtn" style="background:#4CAF50; color:white; padding:10px 15px; border:none; border-radius:6px; cursor:pointer; font-weight:bold;">‚ûï Hozz√°ad√°s</button>
      <button id="clearDayBtn" style="background:#d9534f; color:white; padding:10px 15px; border:none; border-radius:6px; cursor:pointer; font-weight:bold;">üóëÔ∏è Kiv√°lasztott nap t√∂rl√©se</button>																																																						 
    </div>

    <div id="weekTable" class="card" style="margin-top:20px; padding:20px; border-radius:12px; background:#ffffffcc; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
      <h3 style="font-size:22px; margin-bottom:15px;">Heti t√°panyag √∂sszes√≠t≈ë</h3>
      <table style="border-collapse:collapse; width:100%; background:white; border-radius:10px; overflow:hidden;">
        <thead style="background:#e3e9f0;">
          <tr>
            <th style="padding:10px; text-align:left;">Nap</th>
            <th style="padding:10px; text-align:left;">√âtelek</th>
            <th style="padding:10px; text-align:left;">Hozz√°val√≥k (√∂sszes√≠tve)</th>
            <th style="padding:10px;">Kcal</th>
            <th style="padding:10px;">Feh√©rje</th>
            <th style="padding:10px;">Sz√©nhidr√°t</th>
            <th style="padding:10px;">Zs√≠r</th>
            <th style="padding:10px;">Rost</th>
          </tr>
        </thead>
        <tbody id="weekBody"></tbody>
      </table>
    </div>
  </div>

  <div id="weeklyShopping" class="card" style="margin-top:20px; padding:20px; border-radius:12px; background:#ffffffcc; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
  <h3 style="font-size:22px; margin-bottom:15px;">üõí Heti bev√°s√°rl√≥lista (√∂sszes nap)</h3>
  <div id="weeklyShoppingChips" style="display:flex; flex-wrap:wrap; gap:8px;"></div>
  </div>
  
  <div id="ingredientLegend" class="card" style="margin-top:20px; background:#e0e7ef; color:#222;">
    <h3>Jelmagyar√°zat a nem grammban √©rtelmezhet≈ë hozz√°val√≥khoz</h3>
    <ul>
      <li><strong>Toj√°s (S)</strong> ‚âà 50 g</li>
      <li><strong>Toj√°s (M)</strong> ‚âà 60 g</li>
      <li><strong>Toj√°s (L)</strong> ‚âà 70 g</li>
      <li><strong>Ol√≠vaolaj</strong> ‚Äì 1 ev≈ëkan√°l ‚âà 13.5 g</li>
    </ul>
  </div>

  <div id="allIngredients" class="all-ingredients"></div>

  <script>
    const nutrientData = {
      "Lilak√°poszta": { gi: 10, kcal: 31, protein: 1.4, carbs: 5.3, fat: 0.2, fiber: 2.1, color: "#6511ED" },																											  
      "Burgonya": { gi: "70-90", kcal: 77, protein: 2, carbs: 17, fat: 0.1, fiber: 2.2, color: "#FFD700" },
      "√âdesburgonya": { gi: "50-60", kcal: 86, protein: 1.6, carbs: 20, fat: 0.1, fiber: 3, color: "#FF8C00" },
      "Rizs": { gi: 70, kcal: 130, protein: 2.4, carbs: 28, fat: 0.3, fiber: 0.4, color: "#F5F5DC" },
      "K√∂les": { gi: 71, kcal: 119, protein: 3.5, carbs: 23.5, fat: 1, fiber: 1.3, color: "#FFE4B5" },
      "Hajdina": { gi: 54, kcal: 92, protein: 3.4, carbs: 20, fat: 0.6, fiber: 2, color: "#D2B48C" },
      "Quinoa": { gi: 53, kcal: 120, protein: 4.4, carbs: 21, fat: 1.9, fiber: 2.8, color: "#E6E6FA" },
      "Kukorica": { gi: 52, kcal: 96, protein: 3.2, carbs: 21, fat: 1.5, fiber: 2.7, color: "#FFFF00" },
      "Kukoricaliszt": { gi: 70, kcal: 361, protein: 6.9, carbs: 76, fat: 3.9, fiber: 7.3, color: "#FFFACD" },
      "Toj√°s": { gi: 0, kcal: 155, protein: 13, carbs: 1.1, fat: 11, fiber: 0, color: "#FFF8DC" },
      "Csirke": { gi: 0, kcal: 165, protein: 31, carbs: 0, fat: 3.6, fiber: 0, color: "#FFE4E1" },
      "Pulyka": { gi: 0, kcal: 135, protein: 29, carbs: 0, fat: 1, fiber: 0, color: "#F5DEB3" },
      "Sert√©s": { gi: 0, kcal: 143, protein: 20, carbs: 0, fat: 6, fiber: 0, color: "#CD853F" },
      "Marha": { gi: 0, kcal: 170, protein: 26, carbs: 0, fat: 7, fiber: 0, color: "#8B4513" },
      "Hal": { gi: 0, kcal: 208, protein: 20, carbs: 0, fat: 13, fiber: 0, color: "#87CEFA" },
      "T√∫r√≥": { gi: 0, kcal: 98, protein: 12, carbs: 3.4, fat: 4.3, fiber: 0, color: "#444" },
      "Tejf√∂l": { gi: 0, kcal: 205, protein: 3, carbs: 3.6, fat: 20, fiber: 0, color: "#4F4F4F" },
      "Sajt": { gi: 0, kcal: 350, protein: 24, carbs: 1.4, fat: 28, fiber: 0, color: "#DAA520" },
      "Ol√≠vaolaj": { gi: 0, kcal: 884, protein: 0, carbs: 0, fat: 100, fiber: 0, color: "#556B2F" },
      "Vaj": { gi: 0, kcal: 717, protein: 0.9, carbs: 0.1, fat: 81, fiber: 0, color: "#FFD700" },
      "S√°rgar√©pa": { gi: 35, kcal: 41, protein: 0.9, carbs: 10, fat: 0.2, fiber: 2.8, color: "#FF8C00" },
      "Brokkoli": { gi: 15, kcal: 34, protein: 2.8, carbs: 7, fat: 0.4, fiber: 2.6, color: "#228B22" },
      "Paprika": { gi: 10, kcal: 31, protein: 1, carbs: 6, fat: 0.3, fiber: 2.1, color: "#FF4500" },
      "Cukkini": { gi: 15, kcal: 17, protein: 1.2, carbs: 3.1, fat: 0.3, fiber: 1, color: "#32CD32" },
      "Alma": { gi: 36, kcal: 52, protein: 0.3, carbs: 14, fat: 0.2, fiber: 2.4, color: "#FF0000" },
      "Ban√°n": { gi: 51, kcal: 89, protein: 1.1, carbs: 23, fat: 0.3, fiber: 2.6, color: "#FFD700" },
      "Narancs": { gi: 43, kcal: 47, protein: 0.9, carbs: 12, fat: 0.1, fiber: 2.4, color: "#FFA500" }
    };

    // ‚Üí √öj: alap gramm mennyis√©gek
    const recipes = [
      { name: "Rakott krumpli", needs: { "Burgonya": 600, "Toj√°s": 200, "Tejf√∂l": 150, "Sajt": 100 } },
      { name: "S√ºlt csirke rizzsel", needs: { "Csirke": 400, "Rizs": 200, "Ol√≠vaolaj": 20 } },
      { name: "Hajdina z√∂lds√©gekkel", needs: { "Hajdina": 200, "S√°rgar√©pa": 150, "Brokkoli": 200, "Ol√≠vaolaj": 20 } },
      { name: "Quinoa sal√°ta", needs: { "Quinoa": 200, "Paprika": 150, "Cukkini": 150, "Ol√≠vaolaj": 20 } },
      { name: "Kukoricam√°l√©", needs: { "Kukoricaliszt": 250, "Toj√°s": 100, "Vaj": 80 } },
	  { name: "K√≠nai k√°poszt√°s toj√°s", needs: {"Toj√°s": 200,"Lilak√°poszta": 500, "Ol√≠vaolaj": 50}}																							 
    ];

    const reverseSelect = document.getElementById("reverseSelect");
    const ingredientListDiv = document.getElementById("ingredientList");
    const allIngredientsDiv = document.getElementById("allIngredients");
    const scaleSlider = document.getElementById("scaleSlider");
    const scaleValue = document.getElementById("scaleValue");
    const scaleBox = document.getElementById("scaleBox");

    function refreshDropdown() {
      reverseSelect.innerHTML = '<option disabled selected value="">-- V√°lassz √©telt --</option>';
      recipes.forEach(r => reverseSelect.innerHTML += `<option value="${r.name}">${r.name}</option>`);
    }

    function renderAllIngredients() {
      allIngredientsDiv.innerHTML = '<h3>√ñsszes ismert hozz√°val√≥</h3>';
      for (const name in nutrientData) {
        const d = nutrientData[name];
        const div = document.createElement('div');
        div.className = 'all-ingredient-item';
        div.style.backgroundColor = d.color;
        div.innerHTML = `<strong>${name}</strong> - GI: ${d.gi}, Kcal: ${d.kcal}, Feh√©rje: ${d.protein} g, Sz√©nhidr√°t: ${d.carbs} g, Zs√≠r: ${d.fat} g, Rost: ${d.fiber} g`;
        allIngredientsDiv.appendChild(div);
      }
    }

    refreshDropdown();
    renderAllIngredients();

    reverseSelect.addEventListener("change", () => {
      scaleSlider.value = 1;
      scaleValue.textContent = "1.0√ó";
      scaleBox.style.display = "block";
      updateView();
    });

    scaleSlider.addEventListener("input", updateView);

    function updateView() {
      const chosen = recipes.find(r => r.name === reverseSelect.value);
      if (!chosen) return;

      const multiplier = parseFloat(scaleSlider.value);
      scaleValue.textContent = multiplier.toFixed(1) + "√ó";

      const box = document.getElementById("reverseResult");
      ingredientListDiv.innerHTML = '';

      let html = `<div class=card><strong>${chosen.name}</strong><br>Alap mennyis√©g sk√°l√°zva: ${multiplier.toFixed(1)}√ó</div>`;

      for (const ing in chosen.needs) {
        const baseGr = chosen.needs[ing];
        const currentGr = Math.round(baseGr * multiplier);
        const d = nutrientData[ing];

        if (!d) continue;

        const kcal = (d.kcal * currentGr / 100).toFixed(1);
        const protein = (d.protein * currentGr / 100).toFixed(1);
        const carbs = (d.carbs * currentGr / 100).toFixed(1);
        const fat = (d.fat * currentGr / 100).toFixed(1);
        const fiber = (d.fiber * currentGr / 100).toFixed(1);

        html += `
        <div class="card" style="background-color:${d.color}; color:#fff; text-shadow:1px 1px 2px #000">
          <strong>${ing}</strong> ‚Äì ${currentGr} g<br>
          GI: ${d.gi}<br>
          Kcal: ${kcal}<br>
          Feh√©rje: ${protein} g<br>
          Sz√©nhidr√°t: ${carbs} g<br>
          Zs√≠r: ${fat} g<br>
          Rost: ${fiber} g
        </div>`;

        const tag = document.createElement('div');
        tag.className = 'ingredient-item';
        tag.textContent = ing + " (" + currentGr + " g)";
        tag.style.backgroundColor = d.color;
        ingredientListDiv.appendChild(tag);
      }

      box.innerHTML = html;
    }
  </script>

<script>
  const weekData = {
    "H√©tf≈ë": { items: [], ingredients: {}, kcal:0, protein:0, carbs:0, fat:0, fiber:0},
    "Kedd": { items: [], ingredients: {}, kcal:0, protein:0, carbs:0, fat:0, fiber:0},
    "Szerda": { items: [], ingredients: {}, kcal:0, protein:0, carbs:0, fat:0, fiber:0},
    "Cs√ºt√∂rt√∂k": { items: [], ingredients: {}, kcal:0, protein:0, carbs:0, fat:0, fiber:0},
    "P√©ntek": { items: [], ingredients: {}, kcal:0, protein:0, carbs:0, fat:0, fiber:0},
    "Szombat": { items: [], ingredients: {}, kcal:0, protein:0, carbs:0, fat:0, fiber:0},
    "Vas√°rnap": { items: [], ingredients: {}, kcal:0, protein:0, carbs:0, fat:0, fiber:0}
  };

  function renderWeek() {
    const tbody = document.getElementById('weekBody');
    tbody.innerHTML = '';
    for (const day in weekData) {
      const d = weekData[day];

      const ingChips = Object.entries(d.ingredients || {}).map(([name, grams]) => {
        const color = (nutrientData[name] && nutrientData[name].color) ? nutrientData[name].color : '#666';
        return `<div class="ingredient-item" style="background-color:${color}; margin:3px 6px 3px 0;">${name} (${grams} g)</div>`;
      }).join('');

      tbody.innerHTML += `<tr>
        <td style="padding:10px; font-weight:bold; vertical-align:top;">${day}</td>
        <td style="padding:10px; vertical-align:top;">${d.items.map(i => `<div style='margin-bottom:4px;'>${i}</div>`).join('')}</td>
        <td style="padding:10px; vertical-align:top;">
          <div style="display:flex; flex-wrap:wrap;">${ingChips}</div>
        </td>
        <td style="padding:10px; text-align:center; vertical-align:top;">${d.kcal.toFixed(1)}</td>
        <td style="padding:10px; text-align:center; vertical-align:top;">${d.protein.toFixed(1)}</td>
        <td style="padding:10px; text-align:center; vertical-align:top;">${d.carbs.toFixed(1)}</td>
        <td style="padding:10px; text-align:center; vertical-align:top;">${d.fat.toFixed(1)}</td>
        <td style="padding:10px; text-align:center; vertical-align:top;">${d.fiber.toFixed(1)}</td>
      </tr>`;
    }

    // √öJ: heti bev√°s√°rl√≥lista friss√≠t√©se
    renderWeeklyShopping();
  }


  renderWeek();

  document.getElementById('clearDayBtn').addEventListener('click', ()=>{
    const day = document.getElementById('daySelect').value;
    weekData[day] = { items:[], ingredients:{}, kcal:0, protein:0, carbs:0, fat:0, fiber:0 };
    renderWeek();
  });

  document.getElementById('addToDayBtn').addEventListener('click', () => {
    const chosen = recipes.find(r => r.name === reverseSelect.value);
    if (!chosen) return alert('V√°lassz ki egy √©telt!');

    const multiplier = parseFloat(scaleSlider.value);
    const day = document.getElementById('daySelect').value;

    let totals = {kcal:0, protein:0, carbs:0, fat:0, fiber:0};
    for (const ing in chosen.needs) {
      const baseGr = chosen.needs[ing];
      const currentGr = Math.round(baseGr * multiplier);
      const d = nutrientData[ing];
      if (!d) continue;

      // T√°panyagok
      totals.kcal += d.kcal * currentGr / 100;
      totals.protein += d.protein * currentGr / 100;
      totals.carbs += d.carbs * currentGr / 100;
      totals.fat += d.fat * currentGr / 100;
      totals.fiber += d.fiber * currentGr / 100;

      // √öJ: √∂sszes√≠tett hozz√°val√≥k
      if (!weekData[day].ingredients[ing]) weekData[day].ingredients[ing] = 0;
      weekData[day].ingredients[ing] += currentGr;
    }

    weekData[day].kcal += totals.kcal;
    weekData[day].protein += totals.protein;
    weekData[day].carbs += totals.carbs;
    weekData[day].fat += totals.fat;
    weekData[day].fiber += totals.fiber;

    weekData[day].items.push(chosen.name + " (" + multiplier.toFixed(1) + "√ó)");

    renderWeek();
  });

  function getWeeklyIngredients() {
  const weekly = {};
  for (const day in weekData) {
    const ingMap = weekData[day].ingredients || {};
    for (const name in ingMap) {
      if (!weekly[name]) weekly[name] = 0;
      weekly[name] += ingMap[name];
    }
  }
  return weekly;
  }

  function renderWeeklyShopping() {
  const container = document.getElementById('weeklyShoppingChips');
  if (!container) return;
  const weekly = getWeeklyIngredients();
  const entries = Object.entries(weekly);

  if (entries.length === 0) {
    container.innerHTML = '<div class="card" style="background:#f5f7fa; color:#444;">Nincs m√©g t√©tel. Adj hozz√° √©teleket a napokhoz!</div>';
    return;
  }

  // ABC szerint rendezz√ºk
  entries.sort((a,b)=> a[0].localeCompare(b[0],'hu'));

  container.innerHTML = entries.map(([name, grams]) => {
    const color = (nutrientData[name] && nutrientData[name].color) ? nutrientData[name].color : '#666';
    return `<div class="ingredient-item" style="background-color:${color}; margin:3px 6px 3px 0;">${name} (${grams} g)</div>`;
  }).join('');
  }


</script>

</body>
</html>
